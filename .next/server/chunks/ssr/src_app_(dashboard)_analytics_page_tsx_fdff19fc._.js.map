{"version":3,"sources":["../../../../src/hooks/useAnalytics.ts","../../../../src/app/%28dashboard%29/analytics/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\n\r\nexport function useAnalytics() {\r\n    const [stats, setStats] = useState({\r\n        completedTodos: 0,\r\n        activeTodos: 0,\r\n        totalJournalEntries: 0,\r\n        activeHabits: 0,\r\n        habitStreaks: 0,\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const { user } = useAuth();\r\n\r\n    useEffect(() => {\r\n        async function fetchStats() {\r\n            if (!user) return;\r\n\r\n            try {\r\n                // Todos\r\n                const todosQuery = query(\r\n                    collection(db, \"todos\"),\r\n                    where(\"userId\", \"==\", user.uid)\r\n                );\r\n                const todosSnapshot = await getDocs(todosQuery);\r\n                const todos = todosSnapshot.docs.map((doc) => doc.data());\r\n                const completedTodos = todos.filter((t) => t.completed).length;\r\n                const activeTodos = todos.length - completedTodos;\r\n\r\n                // Journal\r\n                const journalQuery = query(\r\n                    collection(db, \"journal\"),\r\n                    where(\"userId\", \"==\", user.uid)\r\n                );\r\n                const journalSnapshot = await getDocs(journalQuery);\r\n                const totalJournalEntries = journalSnapshot.size;\r\n\r\n                // Habits\r\n                const habitsQuery = query(\r\n                    collection(db, \"habits\"),\r\n                    where(\"userId\", \"==\", user.uid)\r\n                );\r\n                const habitsSnapshot = await getDocs(habitsQuery);\r\n                const habits = habitsSnapshot.docs.map((doc) => doc.data());\r\n                const activeHabits = habits.length;\r\n                const habitStreaks = habits.reduce((acc, curr) => acc + curr.streak, 0);\r\n\r\n                setStats({\r\n                    completedTodos,\r\n                    activeTodos,\r\n                    totalJournalEntries,\r\n                    activeHabits,\r\n                    habitStreaks,\r\n                });\r\n            } catch (error) {\r\n                console.error(\"Error fetching analytics:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchStats();\r\n    }, [user]);\r\n\r\n    return { stats, loading };\r\n}\r\n","\"use client\";\r\n\r\nimport { useAnalytics } from \"@/hooks/useAnalytics\";\r\nimport { BarChart2, CheckSquare, Book, Flame } from \"lucide-react\";\r\n\r\nexport default function AnalyticsPage() {\r\n  const { stats, loading } = useAnalytics();\r\n\r\n  if (loading) {\r\n    return <div className=\"p-8 text-[var(--color-text)]\">Loading analytics...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"mx-auto max-w-4xl\">\r\n      <h1 className=\"mb-8 text-4xl font-bold\" style={{ color: \"var(--color-text)\" }}>Analytics Dashboard</h1>\r\n\r\n      <div className=\"grid gap-6 md:grid-cols-3\">\r\n        <div className=\"cozy-card p-6\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <h3 className=\"font-bold\" style={{ color: \"var(--color-text)\" }}>Total Tasks</h3>\r\n            <CheckSquare className=\"h-5 w-5 text-[var(--color-primary)]\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold\" style={{ color: \"var(--color-text)\" }}>{stats.completedTodos + stats.activeTodos}</p>\r\n          <p className=\"text-sm opacity-70\" style={{ color: \"var(--color-text)\" }}>{stats.completedTodos} completed</p>\r\n        </div>\r\n\r\n        <div className=\"cozy-card p-6\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <h3 className=\"font-bold\" style={{ color: \"var(--color-text)\" }}>Journal Entries</h3>\r\n            <Book className=\"h-5 w-5 text-[var(--color-secondary)]\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold\" style={{ color: \"var(--color-text)\" }}>{stats.totalJournalEntries}</p>\r\n          <p className=\"text-sm opacity-70\" style={{ color: \"var(--color-text)\" }}>Lifetime entries</p>\r\n        </div>\r\n\r\n        <div className=\"cozy-card p-6\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <h3 className=\"font-bold\" style={{ color: \"var(--color-text)\" }}>Habit Streaks</h3>\r\n            <Flame className=\"h-5 w-5 text-[var(--color-danger)]\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold\" style={{ color: \"var(--color-text)\" }}>{stats.habitStreaks}</p>\r\n          <p className=\"text-sm opacity-70\" style={{ color: \"var(--color-text)\" }}>Total streak days</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cozy-card mt-8 flex h-64 items-center justify-center p-8\">\r\n        <div className=\"text-center opacity-50\">\r\n          <BarChart2 className=\"mx-auto mb-2 h-12 w-12 text-[var(--color-text)]\" />\r\n          <p style={{ color: \"var(--color-text)\" }}>Detailed charts coming soon...</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}