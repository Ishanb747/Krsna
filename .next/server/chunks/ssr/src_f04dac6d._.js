module.exports=[49584,a=>{"use strict";var b=a.i(72131);a.i(69387);var c=a.i(60574),d=a.i(20237),e=a.i(11642);function f(){let[a,f]=(0,b.useState)([]),[g,h]=(0,b.useState)(!0),{user:i}=(0,e.useAuth)();(0,b.useEffect)(()=>{if(!i){f([]),h(!1);return}let a=(0,c.query)((0,c.collection)(d.db,"habits"),(0,c.where)("userId","==",i.uid)),b=(0,c.onSnapshot)(a,a=>{f(a.docs.map(a=>({id:a.id,...a.data()}))),h(!1)});return()=>b()},[i]);let j=async b=>{let e=a.find(a=>a.id===b);if(!e)return;let f=new Date;f.setHours(0,0,0,0);let g=f.getTime(),h=e.completedDates.includes(g),i=[...e.completedDates],j=e.streak;h?(i=i.filter(a=>a!==g),j=Math.max(0,j-1)):(i.push(g),j+=1),await (0,c.updateDoc)((0,c.doc)(d.db,"habits",b),{completedDates:i,streak:j})};return{habits:a,loading:g,addHabit:async(a,b="daily")=>{i&&await (0,c.addDoc)((0,c.collection)(d.db,"habits"),{name:a,frequency:b,streak:0,completedDates:[],createdAt:Date.now(),userId:i.uid})},toggleHabit:j,deleteHabit:async a=>{await (0,c.deleteDoc)((0,c.doc)(d.db,"habits",a))}}}a.s(["useHabits",()=>f])},78673,a=>{"use strict";var b=a.i(72131);a.i(69387);var c=a.i(60574),d=a.i(20237),e=a.i(11642);function f(){let[a,f]=(0,b.useState)([]),[g,h]=(0,b.useState)(!0),{user:i}=(0,e.useAuth)();return(0,b.useEffect)(()=>{if(!i){f([]),h(!1);return}let a=(0,c.query)((0,c.collection)(d.db,"todos"),(0,c.where)("userId","==",i.uid),(0,c.orderBy)("createdAt","desc")),b=(0,c.onSnapshot)(a,a=>{f(a.docs.map(a=>({id:a.id,...a.data()}))),h(!1)});return()=>b()},[i]),{todos:a,loading:g,addTodo:async(a,b="medium")=>{i&&await (0,c.addDoc)((0,c.collection)(d.db,"todos"),{text:a,completed:!1,createdAt:Date.now(),userId:i.uid,priority:b})},toggleTodo:async(a,b)=>{await (0,c.updateDoc)((0,c.doc)(d.db,"todos",a),{completed:b})},deleteTodo:async a=>{await (0,c.deleteDoc)((0,c.doc)(d.db,"todos",a))}}}a.s(["useTodos",()=>f])},42184,a=>{"use strict";var b=a.i(87924),c=a.i(11642),d=a.i(49584),e=a.i(78673),f=a.i(72131),g=a.i(87534),h=a.i(41710),i=a.i(16106);function j(){let{user:a}=(0,c.useAuth)(),{habits:j}=(0,d.useHabits)(),{todos:k,addTodo:l}=(0,e.useTodos)();return(0,f.useEffect)(()=>{if(!j.length||!a)return;let b=new Date;b.setHours(0,0,0,0);let c=b.getTime();j.forEach(a=>{k.some(b=>b.text===`Habit: ${a.name}`&&b.createdAt>=c)||l(`Habit: ${a.name}`,"medium")})},[j,a,k,l]),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"mb-6 text-4xl font-bold",style:{color:"var(--color-text)"},children:["Welcome back, ",(0,b.jsx)("span",{style:{color:"var(--color-primary)"},children:a?.email?.split("@")[0]||"User"}),"!"]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"cozy-card p-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"Today's Tasks"}),(0,b.jsx)(g.CheckSquare,{className:"h-6 w-6 text-[var(--color-primary)]"})]}),(0,b.jsxs)("p",{className:"text-3xl font-bold",children:[k.filter(a=>!a.completed).length," remaining"]})]}),(0,b.jsxs)("div",{className:"cozy-card p-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"Focus Time"}),(0,b.jsx)(h.Clock,{className:"h-6 w-6 text-[var(--color-accent)]"})]}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:"0m focused"})]}),(0,b.jsxs)("div",{className:"cozy-card p-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"Habit Streak"}),(0,b.jsx)(i.Flame,{className:"h-6 w-6 text-[var(--color-danger)]"})]}),(0,b.jsxs)("p",{className:"text-3xl font-bold",children:[Math.max(...j.map(a=>a.streak),0)," day best"]})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_f04dac6d._.js.map