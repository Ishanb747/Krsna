{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/projects/krsna/src/hooks/useAnalytics.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\n\r\nexport function useAnalytics() {\r\n    const [stats, setStats] = useState({\r\n        completedTodos: 0,\r\n        activeTodos: 0,\r\n        totalJournalEntries: 0,\r\n        activeHabits: 0,\r\n        habitStreaks: 0,\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const { user } = useAuth();\r\n\r\n    useEffect(() => {\r\n        async function fetchStats() {\r\n            if (!user) return;\r\n\r\n            try {\r\n                // Todos\r\n                const todosQuery = query(\r\n                    collection(db, \"todos\"),\r\n                    where(\"userId\", \"==\", user.uid)\r\n                );\r\n                const todosSnapshot = await getDocs(todosQuery);\r\n                const todos = todosSnapshot.docs.map((doc) => doc.data());\r\n                const completedTodos = todos.filter((t) => t.completed).length;\r\n                const activeTodos = todos.length - completedTodos;\r\n\r\n                // Journal\r\n                const journalQuery = query(\r\n                    collection(db, \"journal\"),\r\n                    where(\"userId\", \"==\", user.uid)\r\n                );\r\n                const journalSnapshot = await getDocs(journalQuery);\r\n                const totalJournalEntries = journalSnapshot.size;\r\n\r\n                // Habits\r\n                const habitsQuery = query(\r\n                    collection(db, \"habits\"),\r\n                    where(\"userId\", \"==\", user.uid)\r\n                );\r\n                const habitsSnapshot = await getDocs(habitsQuery);\r\n                const habits = habitsSnapshot.docs.map((doc) => doc.data());\r\n                const activeHabits = habits.length;\r\n                const habitStreaks = habits.reduce((acc, curr) => acc + curr.streak, 0);\r\n\r\n                setStats({\r\n                    completedTodos,\r\n                    activeTodos,\r\n                    totalJournalEntries,\r\n                    activeHabits,\r\n                    habitStreaks,\r\n                });\r\n            } catch (error) {\r\n                console.error(\"Error fetching analytics:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchStats();\r\n    }, [user]);\r\n\r\n    return { stats, loading };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AACA;;AALA;;;;;AAOO,SAAS;;IACZ,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;QAC/B,gBAAgB;QAChB,aAAa;QACb,qBAAqB;QACrB,cAAc;QACd,cAAc;IAClB;IACA,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,6IAAO;IAExB,IAAA,0KAAS;kCAAC;YACN,eAAe;gBACX,IAAI,CAAC,MAAM;gBAEX,IAAI;oBACA,QAAQ;oBACR,MAAM,aAAa,IAAA,2KAAK,EACpB,IAAA,gLAAU,EAAC,+HAAE,EAAE,UACf,IAAA,2KAAK,EAAC,UAAU,MAAM,KAAK,GAAG;oBAElC,MAAM,gBAAgB,MAAM,IAAA,6KAAO,EAAC;oBACpC,MAAM,QAAQ,cAAc,IAAI,CAAC,GAAG;mEAAC,CAAC,MAAQ,IAAI,IAAI;;oBACtD,MAAM,iBAAiB,MAAM,MAAM;6DAAC,CAAC,IAAM,EAAE,SAAS;4DAAE,MAAM;oBAC9D,MAAM,cAAc,MAAM,MAAM,GAAG;oBAEnC,UAAU;oBACV,MAAM,eAAe,IAAA,2KAAK,EACtB,IAAA,gLAAU,EAAC,+HAAE,EAAE,YACf,IAAA,2KAAK,EAAC,UAAU,MAAM,KAAK,GAAG;oBAElC,MAAM,kBAAkB,MAAM,IAAA,6KAAO,EAAC;oBACtC,MAAM,sBAAsB,gBAAgB,IAAI;oBAEhD,SAAS;oBACT,MAAM,cAAc,IAAA,2KAAK,EACrB,IAAA,gLAAU,EAAC,+HAAE,EAAE,WACf,IAAA,2KAAK,EAAC,UAAU,MAAM,KAAK,GAAG;oBAElC,MAAM,iBAAiB,MAAM,IAAA,6KAAO,EAAC;oBACrC,MAAM,SAAS,eAAe,IAAI,CAAC,GAAG;oEAAC,CAAC,MAAQ,IAAI,IAAI;;oBACxD,MAAM,eAAe,OAAO,MAAM;oBAClC,MAAM,eAAe,OAAO,MAAM;0EAAC,CAAC,KAAK,OAAS,MAAM,KAAK,MAAM;yEAAE;oBAErE,SAAS;wBACL;wBACA;wBACA;wBACA;wBACA;oBACJ;gBACJ,EAAE,OAAO,OAAO;oBACZ,QAAQ,KAAK,CAAC,6BAA6B;gBAC/C,SAAU;oBACN,WAAW;gBACf;YACJ;YAEA;QACJ;iCAAG;QAAC;KAAK;IAET,OAAO;QAAE;QAAO;IAAQ;AAC5B;GA9DgB;;QASK,6IAAO"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/projects/krsna/src/app/%28dashboard%29/analytics/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useAnalytics } from \"@/hooks/useAnalytics\";\r\nimport { BarChart2, CheckSquare, Book, Flame } from \"lucide-react\";\r\n\r\nexport default function AnalyticsPage() {\r\n  const { stats, loading } = useAnalytics();\r\n\r\n  if (loading) {\r\n    return <div className=\"p-8 text-[var(--color-text)]\">Loading analytics...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"mx-auto max-w-4xl\">\r\n      <h1 className=\"mb-8 text-4xl font-bold\" style={{ color: \"var(--color-text)\" }}>Analytics Dashboard</h1>\r\n\r\n      <div className=\"grid gap-6 md:grid-cols-3\">\r\n        <div className=\"cozy-card p-6\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <h3 className=\"font-bold\" style={{ color: \"var(--color-text)\" }}>Total Tasks</h3>\r\n            <CheckSquare className=\"h-5 w-5 text-[var(--color-primary)]\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold\" style={{ color: \"var(--color-text)\" }}>{stats.completedTodos + stats.activeTodos}</p>\r\n          <p className=\"text-sm opacity-70\" style={{ color: \"var(--color-text)\" }}>{stats.completedTodos} completed</p>\r\n        </div>\r\n\r\n        <div className=\"cozy-card p-6\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <h3 className=\"font-bold\" style={{ color: \"var(--color-text)\" }}>Journal Entries</h3>\r\n            <Book className=\"h-5 w-5 text-[var(--color-secondary)]\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold\" style={{ color: \"var(--color-text)\" }}>{stats.totalJournalEntries}</p>\r\n          <p className=\"text-sm opacity-70\" style={{ color: \"var(--color-text)\" }}>Lifetime entries</p>\r\n        </div>\r\n\r\n        <div className=\"cozy-card p-6\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <h3 className=\"font-bold\" style={{ color: \"var(--color-text)\" }}>Habit Streaks</h3>\r\n            <Flame className=\"h-5 w-5 text-[var(--color-danger)]\" />\r\n          </div>\r\n          <p className=\"text-3xl font-bold\" style={{ color: \"var(--color-text)\" }}>{stats.habitStreaks}</p>\r\n          <p className=\"text-sm opacity-70\" style={{ color: \"var(--color-text)\" }}>Total streak days</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cozy-card mt-8 flex h-64 items-center justify-center p-8\">\r\n        <div className=\"text-center opacity-50\">\r\n          <BarChart2 className=\"mx-auto mb-2 h-12 w-12 text-[var(--color-text)]\" />\r\n          <p style={{ color: \"var(--color-text)\" }}>Detailed charts coming soon...</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAAA,+IAAY;IAEvC,IAAI,SAAS;QACX,qBAAO,6LAAC;YAAI,WAAU;sBAA+B;;;;;;IACvD;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;gBAA0B,OAAO;oBAAE,OAAO;gBAAoB;0BAAG;;;;;;0BAE/E,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;wCAAY,OAAO;4CAAE,OAAO;wCAAoB;kDAAG;;;;;;kDACjE,6LAAC,6OAAW;wCAAC,WAAU;;;;;;;;;;;;0CAEzB,6LAAC;gCAAE,WAAU;gCAAqB,OAAO;oCAAE,OAAO;gCAAoB;0CAAI,MAAM,cAAc,GAAG,MAAM,WAAW;;;;;;0CAClH,6LAAC;gCAAE,WAAU;gCAAqB,OAAO;oCAAE,OAAO;gCAAoB;;oCAAI,MAAM,cAAc;oCAAC;;;;;;;;;;;;;kCAGjG,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;wCAAY,OAAO;4CAAE,OAAO;wCAAoB;kDAAG;;;;;;kDACjE,6LAAC,6MAAI;wCAAC,WAAU;;;;;;;;;;;;0CAElB,6LAAC;gCAAE,WAAU;gCAAqB,OAAO;oCAAE,OAAO;gCAAoB;0CAAI,MAAM,mBAAmB;;;;;;0CACnG,6LAAC;gCAAE,WAAU;gCAAqB,OAAO;oCAAE,OAAO;gCAAoB;0CAAG;;;;;;;;;;;;kCAG3E,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;wCAAY,OAAO;4CAAE,OAAO;wCAAoB;kDAAG;;;;;;kDACjE,6LAAC,gNAAK;wCAAC,WAAU;;;;;;;;;;;;0CAEnB,6LAAC;gCAAE,WAAU;gCAAqB,OAAO;oCAAE,OAAO;gCAAoB;0CAAI,MAAM,YAAY;;;;;;0CAC5F,6LAAC;gCAAE,WAAU;gCAAqB,OAAO;oCAAE,OAAO;gCAAoB;0CAAG;;;;;;;;;;;;;;;;;;0BAI7E,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,gPAAS;4BAAC,WAAU;;;;;;sCACrB,6LAAC;4BAAE,OAAO;gCAAE,OAAO;4BAAoB;sCAAG;;;;;;;;;;;;;;;;;;;;;;;AAKpD;GAhDwB;;QACK,+IAAY;;;KADjB"}}]
}